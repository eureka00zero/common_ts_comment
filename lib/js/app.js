(function(t){function e(e){for(var o,r,n=e[0],c=e[1],l=e[2],_=0,h=[];_<n.length;_++)r=n[_],s[r]&&h.push(s[r][0]),s[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);d&&d(e);while(h.length)h.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],o=!0,n=1;n<a.length;n++){var c=a[n];0!==s[c]&&(o=!1)}o&&(i.splice(e--,1),t=r(r.s=a[0]))}return t}var o={},s={app:0},i=[];function r(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=o,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(a,o,function(e){return t[e]}.bind(null,o));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=e,n=n.slice();for(var l=0;l<n.length;l++)e(n[l]);var d=c;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},"855c":function(t,e,a){},cae3:function(t,e){t.exports="data:image/gif;base64,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"},cd49:function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c");var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("aside",{staticClass:"post_return_case",on:{click:function(e){t.hideReport(e)}}},[t._l(t.fakePublishList,function(e,a){return o(t.cardTypeMap[e.__type],{key:e.__type+a,tag:"component",attrs:{config:t.config,data:e},on:{"do-showall":t.doShowall,"do-imgclick":t.doImgclick}})}),t._l(t.cmntArray,function(e,a){return o(t.cardTypeMap[e.__type],{key:a,tag:"component",attrs:{data:e,config:t.config},on:{"do-praise":t.doPraise,"do-reply":t.doReply,"do-report":t.doReport,"do-showall":t.doShowall,"do-imgclick":t.doImgclick,"do-sec-loadmore":t.doSecLoadmore,"show-report":t.showReport,"close-report":t.closeReport}})}),this.loadmoreThreshold?o("div",{staticClass:"cm_loading",class:{hide:!t.topLoadmoreLock||t.noMoreCMNT}},[o("img",{staticClass:"img_width",attrs:{src:a("cae3")}}),t._v("加载中...\n  ")]):t._e()],2)},s=[],i=(a("ac6a"),a("4917"),a("f751"),a("c665")),r=a("dc0a"),n=a("aa9a"),c=a("d328"),l=a("11d9"),d=a("9ab4"),_=a("2b0e"),h=a("60a3"),p=a("65d9"),u=a.n(p),A=a("2ef0"),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"post_return_row no_line",on:{click:t.doReply}},[a("div",{staticClass:"post_return_row_l"},[a("figure",{staticClass:"post_return_row_img mini my"},[a("img",{staticClass:"img_width i_bg",attrs:{src:t.quickInfo.userImg}}),a("i",{staticClass:"post_return_row_ic"})])]),t._m(0)])},f=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("aside",{staticClass:"post_return_row_r"},[a("input",{staticClass:"post_return_row_ipt",attrs:{type:"text",placeholder:"我的回复…",readonly:""}})])}],g="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKA\nAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII=",w=_["default"].extend({name:"quickReplyCard",props:{data:{type:Object,required:!0},config:{type:Object}},created:function(){},computed:{quickInfo:function(){var t=Object.assign({},this.data);return t.userImg=t.__loginUserImg||g,t}},methods:{doReply:function(){this.$emit("do-reply",{data:this.data})}}}),y=w,v=a("2877"),C=Object(v["a"])(y,m,f,!1,null,null,null),b=C.exports,k=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"post_return_row",class:{more_list:t.data.__singleLoadmore}},[o("div",{staticClass:"post_return_row_l"}),o("aside",{staticClass:"post_return_row_r"},[o("a",{staticClass:"post_return_more",class:{hide:t.data.__showLoading},staticStyle:{"text-indent":"initial"},attrs:{href:"javascript:void(0)"},on:{click:t.doSecLoadmore}},[t._v("查看剩余"),o("span",[t._v(t._s(t.data.__remainCount))]),t._v("条"+t._s(t.showCMNTName)+"...")]),o("a",{staticClass:"cm_loading",class:{hide:!t.data.__showLoading}},[o("img",{staticClass:"img_width",attrs:{src:a("cae3")}}),t._v("加载中...")])])])},O=[],E=_["default"].extend({name:"loadmoreCard",props:{data:{type:Object,required:!0},config:{type:Object}},data:function(){return{showCMNTName:""}},created:function(){this.showCMNTName=this.config.showName||"评论"},methods:{doSecLoadmore:function(){this.$emit("do-sec-loadmore",{data:this.data})}}}),L=E,j=Object(v["a"])(L,k,O,!1,null,null,null),B=j.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"post_return_row",class:{no_line:!t.data.__hasLine}},[a("div",{staticClass:"post_return_row_l"},[a("figure",{staticClass:"post_return_row_img my",class:{mini:t.data.__showMini}},[a("img",{staticClass:"img_width i_bg",attrs:{src:t.data.profile_img}}),a("i",{staticClass:"post_return_row_ic"})])]),a("aside",{staticClass:"post_return_row_r"},[a("div",{staticClass:"post_return_com"},[a("h2",{staticClass:"post_return_com_tit"},[a("span",{staticClass:"post_return_com_tit_id"},[t._v(t._s(t.data.nick))]),t.data.tag?a("mark",{staticClass:"post_return_com_tit_sign"},[t._v(t._s(t.data.tag))]):t._e(),t.fakePublishText?a("span",{staticClass:"post_return_com_tit_state"},[t._v(t._s(t.fakePublishText))]):t._e()]),a("address",{staticClass:"post_return_add"},[a("span",{staticClass:"post_return_add_txt"},[t._v(t._s(t.data.area))]),a("time",{attrs:{calss:"post_return_add_t"}},[t._v(t._s(t.data.__showTime))])]),a("div",{class:{post_return_show:!t.data.__showEllipsis}},[a("p",{staticClass:"post_return_reply",domProps:{innerHTML:t._s(t.data.__showContent)}}),a("a",{staticClass:"post_return_reply_more",on:{click:t.doShowall}},[t._v("展开全部")]),t.data.comment_imgs&&t.data.comment_imgs[0]?a("img",{staticClass:"post_return_img i_bg",attrs:{src:t.data.comment_imgs[0]},on:{click:t.doImgclick}}):t._e()])])])])},D=[],S="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEUAAACne\n j3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII=",T=_["default"].extend({name:"fakePubCard",props:{data:{type:Object,required:!0},config:{type:Object}},data:function(){return{fakePublishText:""}},created:function(){this.data.profile_img=this.data.profile_img||S,this.fakePublishText=this.config.fakePublishText},methods:{doShowall:function(){this.$emit("do-showall",{data:this.data})},doImgclick:function(){this.$emit("do-imgclick",{data:this.data})}}}),M=T,R=Object(v["a"])(M,I,D,!1,null,null,null),Q=R.exports,U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"post_return_row",class:{no_line:!t.data.__hasLine}},[a("div",{staticClass:"post_return_row_l"},[a("figure",{staticClass:"post_return_row_img",class:{mini:t.data.__showMini,my:t.data.__isMy}},[a("img",{staticClass:"img_width i_bg",attrs:{src:t.data.profile_img}}),a("i",{staticClass:"post_return_row_ic"})])]),a("aside",{staticClass:"post_return_row_r"},[a("div",{staticClass:"post_return_com",class:{sp:t.data.__hot}},[a("a",{staticClass:"post_return_report",class:{hide:!t.data.__showReport},attrs:{href:"javascript:void(0)"},on:{click:t.doReport}},[a("i",{staticClass:"icon_police"}),a("span",{staticClass:"post_return_report_txt"},[t._v("举报")])]),a("h2",{staticClass:"post_return_com_tit"},[a("span",{staticClass:"post_return_com_tit_id"},[t._v(t._s(t.data.nick))]),t.data.tag?a("mark",{staticClass:"post_return_com_tit_sign"},[t._v(t._s(t.data.tag))]):t._e()]),a("address",{staticClass:"post_return_add"},[a("span",{staticClass:"post_return_add_txt"},[t._v(t._s(t.data.area))]),a("time",{attrs:{calss:"post_return_add_t"}},[t._v(t._s(t.data.__showTime))])]),a("nav",{class:{post_return_show:!t.data.__showEllipsis},attrs:{tag:"div",options:{domEvents:!0},"press-options":{time:800}},on:{press:function(e){t.showReport(e)},tap:function(e){t.closeReport(e)}}},[a("p",{staticClass:"post_return_reply",domProps:{innerHTML:t._s(t.data.__showContent)}}),a("a",{staticClass:"post_return_reply_more",on:{click:t.doShowall}},[t._v("展开全部")]),t.data.comment_imgs&&t.data.comment_imgs[0]?a("img",{staticClass:"post_return_img i_bg",attrs:{src:t.data.comment_imgs[0]},on:{click:t.doImgclick}}):t._e()]),a("nav",{staticClass:"post_return_fun"},[a("a",{staticClass:"post_return_fun_link",class:{active:t.data.__doPraise},attrs:{href:"javascript:void(0)"},on:{click:t.doPraise}},[t._m(0),a("span",{staticClass:"post_return_fun_txt"},[a("span",[t._v(t._s(t.data.__showAgree))]),t._v("赞")])]),a("a",{staticClass:"post_return_fun_link",attrs:{href:"javascript:void(0)"},on:{click:t.doReply}},[a("i",{staticClass:"ic_com_reply post_return_fun_ic"}),a("span",{staticClass:"post_return_fun_txt"},[t._v("回复")])])])])])])},N=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"post_return_fun_ic_an"},[a("i",{staticClass:"ic_praise_reply post_return_fun_ic"})])}],x=_["default"].extend({name:"normalCard",props:{data:{type:Object,required:!0},config:{type:Object}},created:function(){},methods:{doPraise:function(){var t=this.data.__doPraise?1:0;this.$emit("do-praise",{data:this.data,status:t})},doReply:function(){this.$emit("do-reply",{data:this.data})},doReport:function(){this.$emit("do-report",{data:this.data})},doShowall:function(){this.$emit("do-showall",{data:this.data})},doImgclick:function(){this.$emit("do-imgclick",{data:this.data})},showReport:function(t){this.$emit("show-report",{data:this.data})},closeReport:function(){this.$emit("close-report",{data:this.data})}}}),F=x,H=Object(v["a"])(F,U,N,!1,null,null,null),P=H.exports,Y=(a("855c"),a("f400"),a("133d")),K=a("6c36"),q=a.n(K),W=a("cc26"),J=a("4d90"),G=a.n(J),V=a("ab6b"),X=a.n(V),$=function(t){return t?t<=9999?t+"人":t<=99999?Math.round(t/1e3)/10+"万人":t<=999e4?Math.round(t/1e4)+"万人":"999万+人":""},Z=function(t){var e=[],a={};return t.forEach(function(t){if(t.hasOwnProperty("replyList")){var e=t.mid,o={count:t.replyList.length,list:t.replyList};a[e]=o,delete t.replyList}}),e=t,{topLayer:e,secLayer:a}},z=function(t,e){var a=G()(t.content).length,o=Object(W["a"])(q.a.inHTMLData(t.content)),s=a+o.replaceNum-o.replaceLen;-1!=e.indexOf(t.mid)?t.__doPraise=1:t.__doPraise=0,t.agree=parseInt(t.agree),t.__showContent=o.str,t.__type="normalCard",t.__hasLine=0,t.__showReport=0,t.__showMini=0,t.__isMy=0,t.__showTime=at(t.time),t.__showAgree=t.__showAgree?t.__showAgree:$(t.agree),t.__hot=parseInt(t.agree,10)>49,void 0==t.__showEllipsis&&(t.__showEllipsis=s>150)},tt=function(t,e,a,o){var s=new X.a,i=[];return a=a||{},t.forEach(function(t){if(!s.has(t.mid)){if(s.add(t.mid),z(t,o),1==t.publisher&&(t.__isMy=1),t.showReplyWiget&&(t.__hasLine=1),i.push(t),e[t.mid]){i[i.length-1].__hasLine=1;var r=e[t.mid].list&&e[t.mid].list.length||0;a.nick&&a.uid&&e[t.mid].fakeList&&e[t.mid].fakeList.forEach(function(e){et(e,a),e.pUid!==t.wbUserId&&(e.__showContent="回复".concat(e.pNick,"：")+e.__showContent),e.__showMini=1,r&&(e.__hasLine=1),i.push(e)}),r&&e[t.mid].list.forEach(function(e,a){z(e,o),e.__showMini=1,e.__hasLine=a==r-1?0:1,1==e.publisher&&(e.__isMy=1),e.pUid!==t.wbUserId&&(e.__showContent="回复".concat(e.pNick,"：")+e.__showContent),i.push(e)});var n=e[t.mid].count;if(n>r){i[i.length-1].__hasLine=1;var c=Object.assign({},t,{__type:"loadmoreCard",__totalCount:n,__remainCount:n-r,__showLoading:e[t.mid].__loading,__singleLoadmore:!t.showReplyWiget});i.push(c)}}if(t.showReplyWiget){t.showReplyWiget;var l=Object(Y["a"])(t,["showReplyWiget"]);Object.assign(l,{__loginUserImg:a.profile_img,__type:"quickReplyCard"}),i.push(l)}}}),i},et=function(t,e){var a=G()(t.content).length,o=Object(W["a"])(q.a.inHTMLData(t.content)),s=a+o.replaceNum-o.replaceLen;t.profile_img=e.profile_img,t.nick=e.nick,t.uid=e.uid,t.__type="fakePubCard",t.__showContent=o.str,t.__showTime=at(t.time),void 0==t.__showEllipsis&&(t.__showEllipsis=s>150)},at=function(t){var e;if(t){var a=1e3*t;e=new Date(a)}else e=new Date;var o=+e,s=+new Date,i=s-o,r=t;if(i>2592e5)r=e.getMonth()+1+"月"+e.getDate()+"日";else if(i>864e5)r=Math.floor(i/864e5)+"天前";else if(i>36e5){var n="今天 ";(new Date).getDate()!=e.getDate()&&(n="昨天 ");var c=e.getMinutes();c=(c<10?"0":"")+c,r=n+e.getHours()+":"+c}else{if(i<0)return t;i<=36e5&&(r=i/1e3<60?"刚刚":Math.floor(i/6e4)+"分钟前")}return r},ot=function(t){t.__loading=0,t.__page=1},st=function(t,e,a){if(null==e)return t;var o=function(o){var s=0;if(t[o]){t[o]["count"]=e[o]["count"];var i=new Map;t[o]["list"].forEach(function(t){i.set(t.mid,t)}),e[o]["list"].forEach(function(e){i.has(e.mid)?Object.assign(i.get(e.mid),e):(t[o]["list"].push(e),s=1)}),s&&t[o].__page++,a&&(t[o].__loading=0)}else t[o]=e[o],ot(t[o])};for(var s in e)o(s);return t},it={normalCard:"normal-card",quickReplyCard:"quick-card",loadmoreCard:"loadmore-card",fakePubCard:"fake-pub-card"},rt=50,nt=function(t){function e(){var t;return Object(i["a"])(this,e),t=Object(c["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.cardTypeMap=Object.assign({},it),t.cmntArray=[],t.topLoadmoreLock=!1,t.noMoreCMNT=!1,t.fakePublishList=[],t.loadmoreThreshold=0,t.localAutoScroll=1,t.localTopArray={},t.localNewList=[],t.localSecObject={},t.localUserInfo={},t.localAgreedList=[],t._lodashWrapper={},t.topLayerPage=0,t}return Object(n["a"])(e,[{key:"created",value:function(){console.log(this.newData);var t=Z(this.newData),e=this.config||{};void 0===e.autoScroll?this.localAutoScroll=1:this.localAutoScroll=e.autoScroll,void 0===e.loadmoreThreshold?this.loadmoreThreshold=300:this.loadmoreThreshold=e.loadmoreThreshold,console.log(t),this.localSecObject=Object(A["cloneDeep"])(t.secLayer),this.localTopArray=Object(A["cloneDeep"])(t.topLayer),this.localUserInfo=Object(A["cloneDeep"])(this.userInfo)||{},this.localAgreedList=Object(A["cloneDeep"])(this.agreedList)||[],this.localNewList=Object(A["cloneDeep"])(this.newData)||[],this._initSpecData(),this.cmntArray=tt(this.localTopArray,this.localSecObject,this.localUserInfo,this.localAgreedList),this.topLoadmoreLock=!1,this.noMoreCMNT=!1}},{key:"mounted",value:function(){this.loadmoreThreshold&&this._initEventListener()}},{key:"beforeDestroy",value:function(){this._lodashWrapper&&window.removeEventListener("scroll",this._lodashWrapper)}},{key:"doPraise",value:function(t){console.log(t),t=t||{data:{},status:0},t.data.__doPraise=1,t.status||(this.localAgreedList.push(t.data.mid),t.data.agree=t.data.agree+1,t.data.__showAgree=$(t.data.agree),t.data.__hot=parseInt(t.data.agree,10)>49),this.$emit("cmnt-do-praise",t)}},{key:"doReply",value:function(t){this.$emit("cmnt-do-reply",t)}},{key:"doReport",value:function(t){this.$emit("cmnt-do-report",t)}},{key:"doShowall",value:function(t){t.data.__showEllipsis=0,this.$emit("cmnt-do-showall",t)}},{key:"doImgclick",value:function(t){this.$emit("cmnt-do-imgclick",t)}},{key:"doSecLoadmore",value:function(t){var e=t.data.mid,a=this.localSecObject[e]&&this.localSecObject[e].__page||1;t.page=a,t.data.__showLoading=1,this.localSecObject[e].__loading=1,this.$emit("cmnt-do-sec-loadmore",t,this._secLoadmore)}},{key:"doTopLoadmore",value:function(){if(!this.topLoadmoreLock){var t={data:{},page:this.topLayerPage};this.topLoadmoreLock=!0,this.$emit("cmnt-do-top-loadmore",t,this._topLoadmore)}}},{key:"showReport",value:function(t){this._closeAllReport(),t.data.__showReport=1}},{key:"closeReport",value:function(t){this._closeAllReport()}},{key:"hideReport",value:function(t){var e=t.target||t.srcElement;e.className.match("post_return_reply")||this._closeAllReport()}},{key:"refreshAllCMNT",value:function(t){var e=this,a=t.topLayer,o=t.secLayer,s=t.userInfo;this.fakePublishList=[],this.cmntArray.forEach(function(t){t.__doPraise=0}),this.localSecObject=Object(A["cloneDeep"])(o),this.localTopArray=Object(A["cloneDeep"])(a),this._initSpecData(),s&&(this.localUserInfo=Object(A["cloneDeep"])(s)),setTimeout(function(){e.cmntArray=tt(e.localTopArray,e.localSecObject,e.localUserInfo,e.localAgreedList)},10)}},{key:"updateUserInfo",value:function(t){t=t||{},this.localUserInfo=Object(A["cloneDeep"])(t),this.cmntArray=tt(this.localTopArray,this.localSecObject,this.localUserInfo,this.localAgreedList)}},{key:"fakePublish",value:function(t){if(t.userInfo&&(this.localUserInfo=Object(A["cloneDeep"])(t.userInfo)),this.localUserInfo.nick)if(t.fakeData)if(t.target&&t.target.mid){var e,a=Object(A["cloneDeep"])(t.fakeData);if(a.parent_uid=t.target.uid,a.parent_nick=t.target.nick,t.target.thread){if(e=t.target.thread,!this.localSecObject[e])return void console.log("Error, 对二级评论的假发布，却本身没有二级评论")}else e=t.target.mid,this.localSecObject[e]||(this.localSecObject[t.target.mid]={});this.localSecObject[e].fakeList=this.localSecObject[e].fakeList||[],this.localSecObject[e].fakeList.unshift(a),this.cmntArray=tt(this.localTopArray,this.localSecObject,this.localUserInfo,this.localAgreedList);for(var o,s=this.$children.length,i=0;i<s;i++)if(e===this.$children[i].$data.mid){o=this.$children[i].$el;break}this.localAutoScroll&&o&&this._pageScroll(o.offsetTop-rt)}else{var r=Object(A["cloneDeep"])(t.fakeData);et(r,this.localUserInfo),this.fakePublishList.unshift(r),this.localAutoScroll&&this._pageScroll(this.$el.offsetTop-rt)}else console.log("Err， 没有假发布数据， 不进行假发布");else console.log("Err， 没有登录用户信息， 不进行假发布")}},{key:"_initSpecData",value:function(){for(var t in this.localSecObject)this.localSecObject.hasOwnProperty(t)&&ot(this.localSecObject[t]);this.topLayerPage=2}},{key:"_closeAllReport",value:function(){this.cmntArray.forEach(function(t){t.__showReport=0})}},{key:"_secLoadmore",value:function(t){var e=t.secLayer,a=t.userInfo;a&&(this.localUserInfo=Object(A["cloneDeep"])(a)),this.localSecObject=st(this.localSecObject,e,1),this.cmntArray=tt(this.localTopArray,this.localSecObject,this.localUserInfo,this.localAgreedList)}},{key:"_topLoadmore",value:function(t){var e=t.topLayer,a=t.secLayer,o=t.userInfo;o&&(this.localUserInfo=Object(A["cloneDeep"])(o)),e&&e.length?(this.topLoadmoreLock=!1,this.topLayerPage++,this.localTopArray=this.localTopArray.concat(e),this.localSecObject=st(this.localSecObject,a),this.cmntArray=tt(this.localTopArray,this.localSecObject,this.localUserInfo,this.localAgreedList)):(this.noMoreCMNT=!0,this.topLoadmoreLock=!0)}},{key:"_initEventListener",value:function(){this._lodashWrapper=Object(A["throttle"])(this._checkLoadmore,300),window.addEventListener("scroll",this._lodashWrapper)}},{key:"_checkLoadmore",value:function(){var t=document.documentElement.clientHeight||window.innerHeight,e=document.documentElement.scrollHeight||document.body.offsetHeight,a=document.documentElement.scrollTop||document.body.scrollTop;a+t+this.loadmoreThreshold<e||this.doTopLoadmore()}},{key:"_pageScroll",value:function(t){var e,a=t,o=document.documentElement.scrollTop||document.body.scrollTop;window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame;var s=a-o,i=Math.abs(s);function r(){0,o+=e,window.scrollTo(0,o),(e>0&&o<=a-3||e<0&&o>=a+3)&&requestAnimationFrame(r)}e=i<1e4?s/20:i<2e4?s/40:s/50,requestAnimationFrame(r)}},{key:"updated",value:function(){}}]),Object(r["a"])(e,t),e}(_["default"]);d["a"]([Object(h["a"])()],nt.prototype,"topLayer",void 0),d["a"]([Object(h["a"])()],nt.prototype,"secLayer",void 0),d["a"]([Object(h["a"])()],nt.prototype,"userInfo",void 0),d["a"]([Object(h["a"])()],nt.prototype,"agreedList",void 0),d["a"]([Object(h["a"])()],nt.prototype,"config",void 0),d["a"]([Object(h["a"])()],nt.prototype,"newData",void 0),d["a"]([Object(h["b"])()],nt.prototype,"cardTypeMap",void 0),nt=d["a"]([u()({components:{normalCard:P,quickCard:b,loadmoreCard:B,fakePubCard:Q}})],nt);var ct=nt,lt=ct,dt=Object(v["a"])(lt,o,s,!1,null,null,null),_t=dt.exports;e["default"]=_t}});
//# sourceMappingURL=app.d2fae1a4.js.map